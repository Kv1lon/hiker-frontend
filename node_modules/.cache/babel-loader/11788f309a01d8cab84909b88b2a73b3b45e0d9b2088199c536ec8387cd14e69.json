{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"profile\",\n  props: ['slug'],\n  data: () => ({\n    user: {},\n    cur_user: {},\n    backend: \"\",\n    sub_status: \"\",\n    followers_count: \"\",\n    region: {},\n    city: \"\"\n  }),\n  created() {\n    this.cur_user = this.$store.state.cuser;\n    this.loadUser();\n    this.backend = this.$store.state.backendUrl + `auth/users/me/`;\n  },\n  methods: {\n    async loadUser() {\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/${this.slug}/`,\n        method: 'GET',\n        headers: {\n          'Content-type': 'application/json'\n        }\n      }).then(response => {\n        this.user = response.data;\n        this.followers_count = response.data.followers.length;\n        this.region = response.data.region;\n        this.city = response.data.city;\n        if (response.data.followers.includes(this.$store.state.cuser.id)) {\n          this.sub_status = \"follow\";\n        } else {\n          this.sub_status = \"unfollow\";\n        }\n      }).catch(err => {\n        let r = this.$router.resolve({\n          name: '404'\n        });\n        window.location.assign(r.href);\n      });\n    },\n    async Follow() {\n      const formData = new FormData();\n      formData.append(\"id\", this.$store.state.cuser.id);\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/follow/${this.user.id}`,\n        data: formData,\n        method: 'POST'\n      }).then(resp => {\n        console.log(resp), this.loadUser();\n      });\n    },\n    async Unfollow() {\n      const formData = new FormData();\n      formData.append(\"id\", this.$store.state.cuser.id);\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/unfollow/${this.user.id}`,\n        data: formData,\n        method: 'POST'\n      }).then(resp => {\n        console.log(resp), this.loadUser();\n      });\n    },\n    goTo(slug_u) {\n      let r = this.$router.resolve({\n        name: 'profile_edit',\n        params: {\n          slug: slug_u\n        } // put your route information in\n      });\n\n      window.location.assign(r.href);\n    }\n  }\n};","map":{"version":3,"names":["axios","name","props","data","user","cur_user","backend","sub_status","followers_count","region","city","created","$store","state","cuser","loadUser","backendUrl","methods","url","slug","method","headers","then","response","followers","length","includes","id","catch","err","r","$router","resolve","window","location","assign","href","Follow","formData","FormData","append","resp","console","log","Unfollow","goTo","slug_u","params"],"sources":["/home/oliverqa/Documents/hiker-frontend/src/views/profile.vue"],"sourcesContent":["<template>\n<div data-aos=\"fade-in\" data-aos-delay=\"300\"  :style=\"{'background-image': 'url(' + region.background_img + ')',backgroundSize:'100%',}\">\n  <div data-aos=\"fade-in\" data-aos-delay=\"300\" class=\"container\">\n    <div class=\"main-body\">\n      <div class=\"row gutters-sm\">\n        <div class=\"col-md-4 mb-3\">\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <div class=\"d-flex flex-column align-items-center text-center\">\n                <img v-if=\"user.profile_img\" :src=\"user.profile_img\" style=\"border-radius: 100px;\" alt=\"Admin\" class=\"rounded-circle\" width=\"150\">\n                <img v-else src=\"https://secure.gravatar.com/avatar/c9877cc06c704dbe1dd3d4f305cb22d6?s=650&d=mm&r=g\" style=\"border-radius: 100px;\" alt=\"Admin\" class=\"rounded-circle\" width=\"150\">\n\n                <div class=\"mt-3\">\n                  <h4 class=\"profile_text\">{{user.username}}</h4>\n                  <p v-if=\"user.bio\" class=\"text-secondary mb-1 profile_text\"  v-html=\"user.bio \"></p>\n                  <p v-if=\"city\" class=\"text-muted font-size-sm profile_text\">{{city.title}}</p>\n                  <div v-if=\"user.username !== cur_user.username && cur_user.username\">\n                    <button v-if=\"sub_status === 'unfollow'\" class=\"btn btn-primary\" @click=\"Follow\">Підписатися</button>\n                    <button v-if=\"sub_status === 'follow'\" class=\"btn btn-primary\" @click=\"Unfollow\">Відписатися</button>\n                  </div>\n                  <button v-else-if=\"cur_user.username\" @click.prevent=\"goTo(user.slug)\" class=\"btn btn-primary\">Змінити профіль</button>\n                  <p class=\"text-muted profile_text\">\n                    Підписників:{{followers_count}}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-8\">\n          <div class=\"card mb-3\">\n            <div class=\"card-body\">\n              <div v-if=\"user.first_name\" class=\"row profile_text\">\n                <div class=\"col-sm-3 \">\n                  <h6  lass=\"mb-0\">Імя</h6>\n                </div>\n                <div class=\"col-sm-9 text-secondary\">\n                  {{user.first_name}}\n                    </div>\n              </div>\n              <hr  v-if=\"user.first_name\" >\n              <div class=\"row profile_text\">\n                <div class=\"col-sm-3\">\n                  <h6 class=\"mb-0\">Email</h6>\n                </div>\n                <div class=\"col-sm-9 text-secondary\">\n                  {{user.email}}\n                    </div>\n              </div>\n              <hr>\n              <div class=\"row profile_text\">\n                <div class=\"col-sm-3\">\n                  <h6 class=\"mb-0\">Дата реєстрації</h6>\n                </div>\n                <div class=\"col-sm-9 text-secondary\">\n                  {{user.date_joined}}\n                    </div>\n              </div>\n              <hr>\n              <div v-if=\"city.title\" class=\"row profile_text\">\n                <div class=\"col-sm-3\">\n                  <h6 class=\"mb-0\">Адреса</h6>\n                </div>\n                <div class=\"col-sm-9 text-secondary\">\n                  {{city.title}}\n                    </div>\n              </div>\n              <hr  v-if=\"city.title\">\n              <div v-if=\"region.title\" class=\"row profile_text\">\n                <div class=\"col-sm-3\">\n                  <h6 class=\"mb-0\">Улюблене</h6>\n                </div>\n                <div class=\"col-sm-9 text-secondary\">\n                  {{region.title}}\n                    </div>\n              </div>\n              <hr  v-if=\"region.title\">\n              <div class=\"row profile_text\">\n                <div class=\"col-sm-3\">\n                  <h6 class=\"mb-0\">Бали</h6>\n                </div>\n                <div class=\"col-sm-9 text-secondary\">\n                  {{user.points}}\n                    </div>\n              </div>\n              <hr>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n</div>\n  </div>\n</template>\n\n<script>\n  import axios from \"axios\";\n\n  export default {\n    name: \"profile\",\n    props:['slug'],\n    data: () => ({\n      user: {},\n      cur_user:{},\n      backend:\"\" ,\n      sub_status:\"\",\n      followers_count:\"\",\n      region:{},\n      city:\"\"\n    }),\n\n    created() {\n      this.cur_user = this.$store.state.cuser\n      this.loadUser()\n      this.backend = this.$store.state.backendUrl+`auth/users/me/`\n\n    },\n    methods: {\n      async loadUser() {\n        axios({url: this.$store.state.backendUrl+`api/v1/${this.slug}/`, method: 'GET',headers: {'Content-type': 'application/json',}}).then(response => {this.user  = response.data\n          this.followers_count = response.data.followers.length\n          this.region = response.data.region\n          this.city = response.data.city\n\n          if(response.data.followers.includes(this.$store.state.cuser.id)){\n            this.sub_status = \"follow\"\n          }\n          else {\n            this.sub_status = \"unfollow\"\n          }}).catch(err =>{\n          let r = this.$router.resolve({\n            name: '404',\n          })\n          window.location.assign(r.href)\n        })\n      },\n\n      async Follow(){\n        const formData = new FormData();\n        formData.append(\"id\", this.$store.state.cuser.id);\n        axios({url: this.$store.state.backendUrl+`api/v1/follow/${this.user.id}`, data:formData, method: 'POST'}).then(resp =>{console.log(resp),this.loadUser()} )\n      },\n\n      async Unfollow(){\n        const formData = new FormData();\n        formData.append(\"id\", this.$store.state.cuser.id);\n        axios({url: this.$store.state.backendUrl+`api/v1/unfollow/${this.user.id}`, data:formData, method: 'POST'})\n                .then(resp =>{console.log(resp),this.loadUser()} )\n      },\n\n      goTo(slug_u) {\n        let r = this.$router.resolve({\n          name: 'profile_edit',params: {slug: slug_u} // put your route information in\n        })\n        window.location.assign(r.href)\n      },\n    },\n  }\n\n</script>\n\n<style scoped>\n  .profile_text{\n    background-color: mintcream;\n    border-radius: 5px;\n    color: #384452;\n    padding: 1%;\n  }\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}