{"ast":null,"code":"import axios from \"axios\";\nimport { useToast } from \"vue-toastification\";\nexport default {\n  name: \"contact\",\n  data: () => ({\n    subject: \"\",\n    message: \"\",\n    name: \"\",\n    email: \"\",\n    msg: [],\n    toast: useToast()\n  }),\n  watch: {\n    message(value) {\n      // binding this to the data value in the email input\n      this.message = value;\n      this.validateText(value, 'message', 20);\n    },\n    subject(value) {\n      // binding this to the data value in the email input\n      this.subject = value;\n      this.validateText(value, 'subject', 5);\n    },\n    name(value) {\n      // binding this to the data value in the email input\n      this.name = value;\n      this.validateText(value, 'name', 1);\n    },\n    email(value) {\n      // binding this to the data value in the email input\n      this.email = value;\n      this.validateEmail(value);\n    }\n  },\n  methods: {\n    send_mail() {\n      if (!this.msg['message'] && !this.msg['name'] && !this.msg['email'] && !this.msg['subject']) {\n        const formData = new FormData();\n        formData.append(\"subject\", this.subject);\n        formData.append(\"message\", this.message);\n        formData.append(\"name\", this.name);\n        formData.append(\"email\", this.email);\n        axios({\n          url: this.$store.state.backendUrl + `api/v1/send_mail`,\n          data: formData,\n          method: 'POST'\n        }).then(response => {\n          console.log(response);\n          this.toast.success(\" Отправлено \");\n        }).catch(err => {\n          this.toast.error(\" Відбулася помилка. Введіть валідні данні або спрбуйте пізніше \");\n        });\n      } else {\n        this.toast.error(\" Відбулася помилка. Введіть валідні данні або спрбуйте пізніше  \");\n      }\n    },\n    validateText(value, ob, chars) {\n      let difference = chars - value.length;\n      if (value.length < chars) {\n        this.msg[ob] = `Повинно бути ${chars} символів! ` + difference + ' залишилось символів';\n      } else {\n        this.msg[ob] = '';\n      }\n    },\n    validateEmail(value) {\n      if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(value)) {\n        this.msg['email'] = '';\n      } else {\n        this.msg['email'] = 'Це не схоже на email';\n      }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}