{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"profile\",\n  props: ['slug'],\n  data: () => ({\n    user: {},\n    cur_user: {},\n    backend: \"\",\n    sub_status: \"\",\n    followers_count: \"\",\n    region: {},\n    city: \"\"\n  }),\n  created() {\n    this.cur_user = this.$store.state.cuser;\n    this.loadUser();\n    this.backend = this.$store.state.backendUrl + `auth/users/me/`;\n  },\n  methods: {\n    async loadUser() {\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/${this.slug}/`,\n        method: 'GET',\n        headers: {\n          'Content-type': 'application/json'\n        }\n      }).then(response => {\n        this.user = response.data;\n        this.followers_count = response.data.followers.length;\n        this.region = response.data.region;\n        this.city = response.data.city;\n        if (response.data.followers.includes(this.$store.state.cuser.id)) {\n          this.sub_status = \"follow\";\n        } else {\n          this.sub_status = \"unfollow\";\n        }\n      }).catch(err => {\n        let r = this.$router.resolve({\n          name: '404'\n        });\n        window.location.assign(r.href);\n      });\n    },\n    async Follow() {\n      const formData = new FormData();\n      formData.append(\"id\", this.$store.state.cuser.id);\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/follow/${this.user.id}`,\n        data: formData,\n        method: 'POST'\n      }).then(resp => {\n        console.log(resp), this.loadUser();\n      });\n    },\n    async Unfollow() {\n      const formData = new FormData();\n      formData.append(\"id\", this.$store.state.cuser.id);\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/unfollow/${this.user.id}`,\n        data: formData,\n        method: 'POST'\n      }).then(resp => {\n        console.log(resp), this.loadUser();\n      });\n    },\n    goTo(slug_u) {\n      let r = this.$router.resolve({\n        name: 'profile_edit',\n        params: {\n          slug: slug_u\n        } // put your route information in\n      });\n\n      window.location.assign(r.href);\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}