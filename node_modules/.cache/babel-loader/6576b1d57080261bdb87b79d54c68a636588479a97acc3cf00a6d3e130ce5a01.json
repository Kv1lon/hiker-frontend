{"ast":null,"code":"import Pagination from \"../components/Pagination\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport axios from \"axios\";\nimport Multiselect from \"@vueform/multiselect\";\nexport default {\n  name: 'Home',\n  components: {\n    Pagination,\n    'font-awesome-icon': FontAwesomeIcon,\n    Multiselect\n  },\n  data: () => ({\n    listPosts: [],\n    user: {},\n    search: \"\",\n    url: ``,\n    total: 0,\n    next: ``,\n    prev: ``,\n    tags: [],\n    cities: [],\n    countries: [],\n    opt_tags: [],\n    opt_cities: [],\n    opt_countries: [],\n    s_tags: [],\n    s_cities: [],\n    s_countries: [],\n    r_tags: [],\n    r_cities: [],\n    r_countries: [],\n    date: \"\",\n    dates: [{\n      year: 'рік'\n    }, {\n      month: 'місяць'\n    }, {\n      week: 'недеіля'\n    }, {\n      today: 'сьогодні'\n    }],\n    popular: [],\n    pop_filter: ''\n  }),\n  created() {\n    this.loadListPosts();\n    this.loadListTags();\n    this.loadListCities();\n    this.loadListCountries();\n    this.loadPopularPosts();\n    this.user = this.$store.state.cuser;\n  },\n  methods: {\n    async chooseDate(date) {\n      this.date = date;\n    },\n    async loadListTags() {\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/tags?limit=100&search=`,\n        method: 'GET',\n        headers: {\n          'Content-type': 'application/json'\n        }\n      }).then(response => {\n        this.tags = response.data;\n        for (var el in response.data) {\n          this.opt_tags.push(response.data[el].name);\n        }\n      });\n    },\n    async loadListCities() {\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/city?limit=100&search=`,\n        method: 'GET',\n        headers: {\n          'Content-type': 'application/json'\n        }\n      }).then(response => {\n        this.cities = response.data;\n        for (var el in response.data) {\n          this.opt_cities.push(response.data[el].title);\n        }\n      });\n    },\n    async loadListCountries() {\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/country?limit=100&search=`,\n        method: 'GET',\n        headers: {\n          'Content-type': 'application/json'\n        }\n      }).then(response => {\n        this.countries = response.data;\n        for (var el in response.data) {\n          this.opt_countries.push(response.data[el].title);\n        }\n      });\n    },\n    async loadListPosts(url) {\n      let city = '';\n      let country = '';\n      let tags = '';\n      this.r_cities = [];\n      this.r_tags = [];\n      this.r_countries = [];\n      for (var el in this.s_cities) {\n        this.r_cities.push(this.cities.find(x => x.title === this.s_cities[el]).slug);\n      }\n      for (var el in this.s_countries) {\n        this.r_countries.push(this.countries.find(x => x.title === this.s_countries[el]).slug);\n      }\n      for (var el in this.s_tags) {\n        this.r_tags.push(this.tags.find(x => x.name === this.s_tags[el]).slug);\n      }\n      for (var c in this.r_cities) {\n        city += '&city=' + this.r_cities[c];\n      }\n      for (var co in this.r_countries) {\n        country += '&country=' + this.r_countries[co];\n      }\n      for (var t in this.r_tags) {\n        tags += '&tags=' + this.r_tags[t];\n      }\n      let date = '';\n      if (this.date) {\n        date = \"&date=\" + this.date;\n      }\n      let popular = '';\n      if (this.pop_filter) {\n        popular = \"&ordering=\" + this.pop_filter;\n      }\n      if (!url) {\n        url = this.$store.state.backendUrl + `api/v1/blog?limit=6&search=${this.search}${city}${country}${tags}${popular}${date}`;\n      }\n      axios({\n        url: url,\n        method: 'GET',\n        headers: {\n          'Content-type': 'application/json'\n        }\n      }).then(response => {\n        this.listPosts = response.data.results, this.total = response.data.count, this.prev = response.data.previous, this.next = response.data.next;\n      });\n    },\n    async loadPopularPosts() {\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/blog?limit=3&search=&date=month&ordering=descending`,\n        method: 'GET',\n        headers: {\n          'Content-type': 'application/json'\n        }\n      }).then(response => {\n        this.popular = response.data.results;\n      });\n    },\n    goTo(slug) {\n      let r = this.$router.resolve({\n        name: 'post',\n        params: {\n          slug: slug\n        } // put your route information in\n      });\n\n      window.location.assign(r.href);\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}