{"ast":null,"code":"import axios from \"axios\";\nimport { useToast } from \"vue-toastification\";\nexport default {\n  name: \"reset_password\",\n  props: ['uid', 'slug'],\n  data: () => ({\n    current_password: '',\n    new_password: '',\n    loading: false,\n    toast: useToast()\n  }),\n  methods: {\n    resetPassword() {\n      if (this.new_password === this.current_password) {\n        this.toast.error('Ноовий пароль не може співпадати зі старим');\n      } else {\n        const formData = new FormData();\n        formData.append(\"uid\", this.uid);\n        formData.append(\"token\", this.slug);\n        formData.append(\"new_password\", this.new_password);\n        formData.append(\"current_password\", this.current_password);\n        this.loading = true;\n        axios({\n          url: this.$store.state.backendUrl + `auth/users/set_password/`,\n          data: formData,\n          method: 'POST',\n          headers: {\n            'Content-type': 'application/json'\n          }\n        }).then(response => {\n          console.log(response);\n        }).catch(err => {\n          this.toast.error('Ошибка');\n        });\n        const formData1 = new FormData();\n        formData1.append(\"uid\", this.uid);\n        formData1.append(\"token\", this.slug);\n        formData1.append(\"new_password\", this.new_password);\n        this.loading = true;\n        axios({\n          url: this.$store.state.backendUrl + `auth/users/reset_password_confirm/`,\n          data: formData1,\n          method: 'POST',\n          headers: {\n            'Content-type': 'application/json'\n          }\n        }).then(response => {\n          console.log(response);\n          this.loading = false;\n          this.toast.success('Пароль змінено');\n          let r = this.$router.resolve({\n            name: 'home' // put your route information in\n          });\n\n          window.location.assign(r.href);\n        }).catch(err => {\n          this.toast.error('Помилка!');\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","useToast","name","props","data","current_password","new_password","loading","toast","methods","resetPassword","error","formData","FormData","append","uid","slug","url","$store","state","backendUrl","method","headers","then","response","console","log","catch","err","formData1","success","r","$router","resolve","window","location","assign","href"],"sources":["/home/oliverqa/Documents/hiker-frontend/src/views/reset_password.vue"],"sourcesContent":["<template>\n      <div v-if=\"loading\" class=\"preloader\">\n    <div class=\"preloader__image\">\n    </div></div>\n\t<div class=\"page-content\">\n\t\t<div data-aos=\"flip-up\" data-aos-delay=\"100\" data-aos-duration=\"1000\" class=\"form-v5-content\">\n\t\t\t<form class=\"form-detail\" @submit.prevent=\"resetPassword\">\n\t\t\t\t<h2>Зміна паролю</h2>\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<label for=\"full-name\">Старий пароль</label>\n\t\t\t\t\t<input type=\"password\" v-model=\"current_password\" name=\"full-name\" id=\"full-name\" class=\"input-text\" placeholder=\"Старый пароль\" required>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-row\">\n\t\t\t\t\t<label for=\"password\">Новий пароль</label>\n\t\t\t\t\t<input type=\"password\"  v-model=\"new_password\" name=\"password\" id=\"password\" class=\"input-text\" placeholder=\"Новый пароль\" required>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-row-last\">\n\t\t\t\t\t<input type=\"submit\" name=\"reset\" value=\"Изменить\">\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport {useToast} from \"vue-toastification\";\n\nexport default {\n  name: \"reset_password\",\n  props:['uid','slug'],\n  data:()=>({\n    current_password:'',\n    new_password:'',\n    loading:false,\n\t  toast : useToast()\n  }),\n  methods:{\n    resetPassword(){\n    \tif(this.new_password === this.current_password){\n    \t\tthis.toast.error('Ноовий пароль не може співпадати зі старим')\n\t\t}\n    \telse{\n      const formData = new FormData();\n                                      formData.append(\"uid\", this.uid)\n                                      formData.append(\"token\", this.slug)\n                                      formData.append(\"new_password\", this.new_password)\n                                      formData.append(\"current_password\", this.current_password)\n                                      this.loading =true\n              axios({url: this.$store.state.backendUrl+`auth/users/set_password/`,data:formData, method: 'POST',headers: {'Content-type': 'application/json',}}).then(response => {\n                console.log(response)\n              }).catch(err => {\t\n\t\t\t\t  this.toast.error('Ошибка')\n\t\t\t  })\n      const formData1 = new FormData();\n                                      formData1.append(\"uid\", this.uid)\n                                      formData1.append(\"token\", this.slug)\n                                      formData1.append(\"new_password\", this.new_password)\n                                      this.loading =true\n              axios({url: this.$store.state.backendUrl+`auth/users/reset_password_confirm/`,data:formData1, method: 'POST',headers: {'Content-type': 'application/json',}}).then(response => {\n                console.log(response)\n                this.loading= false\n                  this.toast.success('Пароль змінено')\n                \tlet r = this.$router.resolve({\n\t\t\t\t\t\t\t\tname: 'home', // put your route information in\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\twindow.location.assign(r.href)\n              }).catch(err => {this.toast.error('Помилка!')\n})\n    }\n  }}\n\n}\n</script>\n\n<style scoped>\n\n.form-detail{\n  text-align: center;\n}\n  .preloader {\n    position: fixed;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n    background: #fff;\n    z-index: 1001;\n  }\n\n  .preloader__image {\n    position: relative;\n    top: 50%;\n    left: 50%;\n    width: 64px;\n    height: 64px;\n    margin-top: -32px;\n    margin-left: -32px;\n    background: url('../assets/Walk.gif') no-repeat 50% 50%;\n    /*расположение (url) изображения gif и др. параметры*/\n  }\n\n  .loaded_hiding .preloader {\n    transition: 0.3s opacity;\n    opacity: 0;\n  }\n\n  .loaded .preloader {\n    opacity: 50%;\n  }\n</style>"],"mappings":"AAyBA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAAQC,QAAQ,QAAO,oBAAoB;AAE3C,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,KAAK,EAAC,CAAC,KAAK,EAAC,MAAM,CAAC;EACpBC,IAAI,EAACA,CAAA,MAAK;IACRC,gBAAgB,EAAC,EAAE;IACnBC,YAAY,EAAC,EAAE;IACfC,OAAO,EAAC,KAAK;IACdC,KAAI,EAAIP,QAAQ,CAAC;EAClB,CAAC,CAAC;EACFQ,OAAO,EAAC;IACNC,aAAaA,CAAA,EAAE;MACd,IAAG,IAAI,CAACJ,YAAW,KAAM,IAAI,CAACD,gBAAgB,EAAC;QAC9C,IAAI,CAACG,KAAK,CAACG,KAAK,CAAC,4CAA4C;MACjE,OACO;QACH,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;QACCD,QAAQ,CAACE,MAAM,CAAC,KAAK,EAAE,IAAI,CAACC,GAAG;QAC/BH,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAACE,IAAI;QAClCJ,QAAQ,CAACE,MAAM,CAAC,cAAc,EAAE,IAAI,CAACR,YAAY;QACjDM,QAAQ,CAACE,MAAM,CAAC,kBAAkB,EAAE,IAAI,CAACT,gBAAgB;QACzD,IAAI,CAACE,OAAM,GAAG,IAAG;QACzCP,KAAK,CAAC;UAACiB,GAAG,EAAE,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,UAAU,GAAE,0BAAyB;UAAChB,IAAI,EAACQ,QAAQ;UAAES,MAAM,EAAE,MAAM;UAACC,OAAO,EAAE;YAAC,cAAc,EAAE;UAAmB;QAAC,CAAC,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;UAClKC,OAAO,CAACC,GAAG,CAACF,QAAQ;QACtB,CAAC,CAAC,CAACG,KAAK,CAACC,GAAE,IAAK;UACxB,IAAI,CAACpB,KAAK,CAACG,KAAK,CAAC,QAAQ;QAC1B,CAAC;QACA,MAAMkB,SAAQ,GAAI,IAAIhB,QAAQ,CAAC,CAAC;QACAgB,SAAS,CAACf,MAAM,CAAC,KAAK,EAAE,IAAI,CAACC,GAAG;QAChCc,SAAS,CAACf,MAAM,CAAC,OAAO,EAAE,IAAI,CAACE,IAAI;QACnCa,SAAS,CAACf,MAAM,CAAC,cAAc,EAAE,IAAI,CAACR,YAAY;QAClD,IAAI,CAACC,OAAM,GAAG,IAAG;QACzCP,KAAK,CAAC;UAACiB,GAAG,EAAE,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,UAAU,GAAE,oCAAmC;UAAChB,IAAI,EAACyB,SAAS;UAAER,MAAM,EAAE,MAAM;UAACC,OAAO,EAAE;YAAC,cAAc,EAAE;UAAmB;QAAC,CAAC,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;UAC7KC,OAAO,CAACC,GAAG,CAACF,QAAQ;UACpB,IAAI,CAACjB,OAAO,GAAE,KAAI;UAChB,IAAI,CAACC,KAAK,CAACsB,OAAO,CAAC,gBAAgB;UACpC,IAAIC,CAAA,GAAI,IAAI,CAACC,OAAO,CAACC,OAAO,CAAC;YACtC/B,IAAI,EAAE,MAAM,CAAE;UACf,CAAC;;UACDgC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAACL,CAAC,CAACM,IAAI;QACtB,CAAC,CAAC,CAACV,KAAK,CAACC,GAAE,IAAK;UAAC,IAAI,CAACpB,KAAK,CAACG,KAAK,CAAC,UAAU;QAC1D,CAAC;MACG;IACF;EAAC;AAEH"},"metadata":{},"sourceType":"module","externalDependencies":[]}