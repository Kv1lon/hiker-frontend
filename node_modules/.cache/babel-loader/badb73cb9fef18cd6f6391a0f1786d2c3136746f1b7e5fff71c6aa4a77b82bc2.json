{"ast":null,"code":"import axios from \"axios\";\nimport Pagination from \"../components/Pagination\";\nexport default {\n  name: \"panel\",\n  props: ['slug'],\n  components: {\n    Pagination\n  },\n  data: () => ({\n    listPosts: [],\n    next: ``,\n    prev: ``,\n    url: ``,\n    search: \"\"\n  }),\n  created() {\n    this.url = `${this.$store.getters.getServerUrl}api/v1/cabinet/${this.$store.state.cuser.slug}?limit=10&search=`, this.loadListPosts(this.url);\n  },\n  methods: {\n    async loadListPosts(url) {\n      axios({\n        url: url,\n        method: 'GET',\n        headers: {\n          'Content-type': 'application/json'\n        }\n      }).then(response => {\n        this.listPosts = response.data.results, this.total = response.data.count, this.prev = response.data.previous, this.next = response.data.next;\n      });\n      console.log(this.listPosts);\n    },\n    goTo(slug) {\n      this.$router.push({\n        name: 'panel_change',\n        params: {\n          slug: slug\n        }\n      });\n    },\n    delete_p(slug_p) {\n      axios({\n        url: this.$store.state.backendUrl + `api/v1/delete/${slug_p}`,\n        method: 'DELETE'\n      }).then(resp => {\n        console.log(resp);\n      }).then(() => this.$router.go());\n    }\n  }\n};","map":{"version":3,"names":["axios","Pagination","name","props","components","data","listPosts","next","prev","url","search","created","$store","getters","getServerUrl","state","cuser","slug","loadListPosts","methods","method","headers","then","response","results","total","count","previous","console","log","goTo","$router","push","params","delete_p","slug_p","backendUrl","resp","go"],"sources":["/home/oliverqa/Documents/hiker-frontend/src/views/cab.vue"],"sourcesContent":["<template>\n  <div class=\"b\">\n    <table  class=\"table table-dark\"><thead><tr>\n      <th scope=\"col\">Id</th>\n      <th scope=\"col\">Дата створення</th>\n      <th scope=\"col\">Назва</th>\n      <th scope=\"col\">Автор</th>\n      <th scope=\"col\">Змінити</th>\n      <th scope=\"col\">Видалити</th>\n    </tr>\n    </thead>\n\n\n      <tbody>\n      <tr data-aos=\"fade-in\" data-aos-delay=\"300\" v-for=\"post in listPosts\">\n        <th scope=\"row\">{{post.id}}</th>\n        <td>{{post.date}}</td>\n        <td>{{post.title}}</td>\n        <td>{{post.author}}</td>\n        <td><a><button @click.prevent=\"goTo(post.slug)\" class=\" btn btn-dark\">Змінити</button></a></td>\n\n        <td><a><button @click.prevent=\"delete_p(post.slug)\" class=\" btn btn-dark\" >Видалити</button></a></td>\n      </tr>\n\n      </tbody>\n\n\n</table>\n           <div class=\"no_a\" data-aos=\"fade-in\" data-aos-delay=\"300\" v-if=\"listPosts.length === 0\">\nУ Вас ще немає статей\n      </div>\n    <Pagination :next=\"next\" :prev=\"prev\" :searchq=\"search\"  @page-changed=\"loadListPosts\"/>\n</div>\n</template>\n\n<script>\n  import axios from \"axios\";\n    import Pagination from \"../components/Pagination\";\n  export default {\n    name: \"panel\",\n    props:['slug'],\n    components:{Pagination},\n    data: () => ({\n      listPosts:[],\n      next:``,\n      prev:``,\n      url:``,\n      search:\"\",\n    }),created() {\n      this.url = `${this.$store.getters.getServerUrl}api/v1/cabinet/${this.$store.state.cuser.slug}?limit=10&search=`, this.loadListPosts(this.url)\n    },\n    methods: {\n      async loadListPosts(url) {\n        axios({url: url, method: 'GET',headers: {'Content-type': 'application/json',}}).then(response => {this.listPosts  = response.data.results,this.total = response.data.count,this.prev = response.data.previous,this.next = response.data.next})\n        console.log(this.listPosts)\n      },\n      goTo(slug) {\n        this.$router.push({ name: 'panel_change', params: {slug: slug}})\n      },\n      delete_p(slug_p){\n        axios({url:  this.$store.state.backendUrl+`api/v1/delete/${slug_p}`, method: 'DELETE',}).then(resp =>{console.log(resp)} ).then(() => this.$router.go())\n      },\n    },}\n</script>\n\n<style scoped>\n.no_a{\n  font-size: 20px;\n  font-weight: bold;\n  display: flex;\n  justify-content: space-around;\n}\n.b{margin-bottom: 30%;\n}\n</style>\n\n"],"mappings":"AAoCE,OAAOA,KAAI,MAAO,OAAO;AACvB,OAAOC,UAAS,MAAO,0BAA0B;AACnD,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,KAAK,EAAC,CAAC,MAAM,CAAC;EACdC,UAAU,EAAC;IAACH;EAAU,CAAC;EACvBI,IAAI,EAAEA,CAAA,MAAO;IACXC,SAAS,EAAC,EAAE;IACZC,IAAI,EAAE,EAAC;IACPC,IAAI,EAAE,EAAC;IACPC,GAAG,EAAE,EAAC;IACNC,MAAM,EAAC;EACT,CAAC,CAAC;EAACC,OAAOA,CAAA,EAAG;IACX,IAAI,CAACF,GAAE,GAAK,GAAE,IAAI,CAACG,MAAM,CAACC,OAAO,CAACC,YAAa,kBAAiB,IAAI,CAACF,MAAM,CAACG,KAAK,CAACC,KAAK,CAACC,IAAK,mBAAkB,EAAE,IAAI,CAACC,aAAa,CAAC,IAAI,CAACT,GAAG;EAC9I,CAAC;EACDU,OAAO,EAAE;IACP,MAAMD,aAAaA,CAACT,GAAG,EAAE;MACvBT,KAAK,CAAC;QAACS,GAAG,EAAEA,GAAG;QAAEW,MAAM,EAAE,KAAK;QAACC,OAAO,EAAE;UAAC,cAAc,EAAE;QAAmB;MAAC,CAAC,CAAC,CAACC,IAAI,CAACC,QAAO,IAAK;QAAC,IAAI,CAACjB,SAAQ,GAAKiB,QAAQ,CAAClB,IAAI,CAACmB,OAAO,EAAC,IAAI,CAACC,KAAI,GAAIF,QAAQ,CAAClB,IAAI,CAACqB,KAAK,EAAC,IAAI,CAAClB,IAAG,GAAIe,QAAQ,CAAClB,IAAI,CAACsB,QAAQ,EAAC,IAAI,CAACpB,IAAG,GAAIgB,QAAQ,CAAClB,IAAI,CAACE,IAAI;MAAA,CAAC;MAC7OqB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACvB,SAAS;IAC5B,CAAC;IACDwB,IAAIA,CAACb,IAAI,EAAE;MACT,IAAI,CAACc,OAAO,CAACC,IAAI,CAAC;QAAE9B,IAAI,EAAE,cAAc;QAAE+B,MAAM,EAAE;UAAChB,IAAI,EAAEA;QAAI;MAAC,CAAC;IACjE,CAAC;IACDiB,QAAQA,CAACC,MAAM,EAAC;MACdnC,KAAK,CAAC;QAACS,GAAG,EAAG,IAAI,CAACG,MAAM,CAACG,KAAK,CAACqB,UAAU,GAAE,iBAAgBD,MAAO,EAAC;QAAEf,MAAM,EAAE;MAAS,CAAC,CAAC,CAACE,IAAI,CAACe,IAAG,IAAI;QAACT,OAAO,CAACC,GAAG,CAACQ,IAAI,CAAC;MAAA,CAAE,CAAC,CAACf,IAAI,CAAC,MAAM,IAAI,CAACS,OAAO,CAACO,EAAE,CAAC,CAAC;IACzJ;EACF;AAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}