"use strict";(self["webpackChunkhiker"]=self["webpackChunkhiker"]||[]).push([[624],{624:function(s,e,a){a.r(e),a.d(e,{default:function(){return D}});var t=a(6252),r=a(8061);const o=s=>((0,t.dD)("data-v-9b0f440e"),s=s(),(0,t.Cn)(),s),n={key:0,class:"preloader"},d=o((()=>(0,t._)("div",{class:"preloader__image"},null,-1))),l=[d],i={class:"page-content"},p={"data-aos":"flip-up","data-aos-delay":"100","data-aos-duration":"1000",class:"form-v5-content"},u=o((()=>(0,t._)("h2",null,"Зміна паролю",-1))),w={class:"form-row"},c=o((()=>(0,t._)("label",{for:"full-name"},"Старий пароль",-1))),h={class:"form-row"},_=o((()=>(0,t._)("label",{for:"password"},"Новий пароль",-1))),m=o((()=>(0,t._)("div",{class:"form-row-last"},[(0,t._)("input",{type:"submit",name:"reset",value:"Изменить"})],-1)));function f(s,e,a,o,d,f){return(0,t.wg)(),(0,t.iD)(t.HY,null,[s.loading?((0,t.wg)(),(0,t.iD)("div",n,l)):(0,t.kq)("",!0),(0,t._)("div",i,[(0,t._)("div",p,[(0,t._)("form",{class:"form-detail",onSubmit:e[2]||(e[2]=(0,r.iM)(((...s)=>f.resetPassword&&f.resetPassword(...s)),["prevent"]))},[u,(0,t._)("div",w,[c,(0,t.wy)((0,t._)("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=e=>s.current_password=e),name:"full-name",id:"full-name",class:"input-text",placeholder:"Старый пароль",required:""},null,512),[[r.nr,s.current_password]])]),(0,t._)("div",h,[_,(0,t.wy)((0,t._)("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=e=>s.new_password=e),name:"password",id:"password",class:"input-text",placeholder:"Новый пароль",required:""},null,512),[[r.nr,s.new_password]])]),m],32)])])],64)}var v=a(9669),g=a.n(v),k=a(3002),b={name:"reset_password",props:["uid","slug"],data:()=>({current_password:"",new_password:"",loading:!1,toast:(0,k.pm)()}),methods:{resetPassword(){if(this.new_password===this.current_password)this.toast.error("Ноовий пароль не може співпадати зі старим");else{const s=new FormData;s.append("uid",this.uid),s.append("token",this.slug),s.append("new_password",this.new_password),s.append("current_password",this.current_password),this.loading=!0,g()({url:this.$store.state.backendUrl+"auth/users/set_password/",data:s,method:"POST",headers:{"Content-type":"application/json"}}).then((s=>{console.log(s)})).catch((s=>{this.toast.error("Ошибка")}));const e=new FormData;e.append("uid",this.uid),e.append("token",this.slug),e.append("new_password",this.new_password),this.loading=!0,g()({url:this.$store.state.backendUrl+"auth/users/reset_password_confirm/",data:e,method:"POST",headers:{"Content-type":"application/json"}}).then((s=>{console.log(s),this.loading=!1,this.toast.success("Пароль змінено");let e=this.$router.resolve({name:"home"});window.location.assign(e.href)})).catch((s=>{this.toast.error("Помилка!")}))}}}},y=a(3744);const C=(0,y.Z)(b,[["render",f],["__scopeId","data-v-9b0f440e"]]);var D=C}}]);
//# sourceMappingURL=624.d0677365.js.map